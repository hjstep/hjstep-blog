{"version":3,"file":"index.js","sources":["../utils/optimizeRenderingCycle.js","../utils/processRenderTasks.js","../utils/common.js","../components/page404.js","../components/posts.js","../utils/constant.js","../router.js","../model/state.js","../index.js","../components/header.js","../components/detail.js"],"sourcesContent":["const compareValue = (node1, node2) => {\n  if (node1.value !== node2.value) {\n    return true\n  }\n\n  if (node1.checked !== node2.checked) {\n    return true\n  }\n\n  return false\n}\n\nconst compareAttributeLength = (node1, node2) => {\n  const n1Attributes = node1.attributes\n  const n2Attributes = node2.attributes\n\n  return n1Attributes.length !== n2Attributes.length\n}\nconst compareAttribute = (node1, node2) => {\n  const n1Attributes = node1.attributes\n\n  return Array.from(n1Attributes).find(\n    ({ name }) => node1.getAttribute(name) !== node2.getAttribute(name),\n  )\n}\n\nconst compareTextcontent = (node1, node2) => {\n  return (\n    node1.children.length === 0 &&\n    node2.children.length === 0 &&\n    node1.textContent !== node2.textContent\n  )\n}\n\nconst isNodeChanged = (node1, node2) => {\n  // TODO 수정필요\n  // 이벤트 핸들러를 갱신하는 로직\n  if (node1.onclick !== node2.onclick) {\n    node2.onclick = node1.onclick\n  }\n\n  const isChangedAttributeLength = compareAttributeLength(node1, node2)\n  if (isChangedAttributeLength) {\n    return true\n  }\n\n  const isChangedAttribute = compareAttribute(node1, node2)\n\n  if (isChangedAttribute) {\n    return true\n  }\n\n  const isChangedValue = compareValue(node1, node2)\n\n  if (isChangedValue) {\n    return true\n  }\n\n  const isChangedTextcontent = compareTextcontent(node1, node2)\n  if (isChangedTextcontent) {\n    return true\n  }\n\n  return false\n}\n\nconst evaluateNodeDifferences = (parentNode, realNode, virtualNode) => {\n  if (!parentNode) return\n  if (realNode && !virtualNode) {\n    realNode.remove()\n    return\n  }\n\n  if (!realNode && virtualNode) {\n    parentNode.appendChild(virtualNode)\n    return\n  }\n\n  if (isNodeChanged(virtualNode, realNode)) {\n    realNode.replaceWith(virtualNode)\n    return\n  }\n}\n\nconst applyDiff = (parentNode, realNode, virtualNode) => {\n  evaluateNodeDifferences(parentNode, realNode, virtualNode)\n\n  const realNodeChildren = realNode ? Array.from(realNode.children) : []\n  const virtualNodeChildren = virtualNode\n    ? Array.from(virtualNode.children)\n    : []\n\n  const max = Math.max(realNodeChildren.length, virtualNodeChildren.length)\n  for (let i = 0; i < max; i++) {\n    applyDiff(realNode, realNodeChildren[i], virtualNodeChildren[i])\n  }\n}\n\nexport default applyDiff\n","import optimizeRenderingCycle from './optimizeRenderingCycle.js'\n\nconst vdom = {}\nconst addComponent = (name, component) => {\n  vdom[name] = component\n}\nconst removeComponent = (name, root) => {\n  vdom[name] = undefined\n  if (root.querySelector(`[data-component=\"${name}\"]`)) {\n    root.querySelector(`[data-component=\"${name}\"]`).innerHTML = ''\n  }\n}\n\nfunction nextFrame() {\n  return new Promise((resolve) => {\n    window.requestAnimationFrame(resolve)\n  })\n}\n\nconst render = async (element, dispatch, redirect, name) => {\n  await nextFrame() // 다음 프레임까지 기다림\n\n  const cloneComponent = !name\n    ? element.cloneNode(true)\n    : await vdom[name](element, dispatch, redirect)\n  const childComponents = cloneComponent.querySelectorAll('[data-component]')\n\n  for (const childNode of childComponents) {\n    const { component: childName } = childNode.dataset\n    if (vdom[childName] !== undefined) {\n      const newChildNode = await render(\n        childNode,\n        dispatch,\n        redirect,\n        childName,\n      )\n      childNode.replaceWith(newChildNode)\n    }\n  }\n\n  return cloneComponent\n}\n\nconst renderDOM = async (rootElement, dispatch, redirect) => {\n  const newRootElement = await render(rootElement, dispatch, redirect)\n  // rootElement.replaceWith(newRootElement)\n  optimizeRenderingCycle(\n    document.getElementById('root'),\n    rootElement,\n    newRootElement,\n  )\n}\n\nexport { renderDOM, addComponent, removeComponent }\n","const applyTemplateWithCallback = (element, name) => {\n  const templateNode = document.getElementById('template-' + name)\n  const clonedTemplateChildNode =\n    templateNode.content.firstElementChild.cloneNode(true)\n  const clonedParentNode = element.cloneNode(true)\n  clonedParentNode.innerHTML = ''\n\n  return (formatCallback) => {\n    if (typeof formatCallback === 'function') {\n      return formatCallback(clonedParentNode, clonedTemplateChildNode)\n    }\n    clonedParentNode.appendChild(clonedTemplateChildNode)\n    return clonedParentNode\n  }\n}\n\nexport { applyTemplateWithCallback }\n","import { applyTemplateWithCallback } from '../utils/common.js'\n\nconst TEMPLATE_NAME = '404'\nconst initLayout = (root) => {\n  root.querySelector('[data-component=\"header\"]').innerHTML = ''\n  root.querySelector('[data-component=\"detail\"]').innerHTML = ''\n  root.querySelector('[data-component=\"posts\"]').innerHTML = ''\n}\n\nexport default () => {\n  const root = document.getElementById('root')\n  return applyTemplateWithCallback(\n    root,\n    TEMPLATE_NAME,\n  )((_, templateNode) => {\n    const parentNode = root\n      .querySelector(`[data-component=\"${TEMPLATE_NAME}\"]`)\n      .cloneNode(true)\n    initLayout(root)\n    parentNode.innerHTML = ''\n    parentNode.appendChild(templateNode)\n    root\n      .querySelector(`[data-component=\"${TEMPLATE_NAME}\"]`)\n      .replaceWith(parentNode)\n  })\n}\n","import { applyTemplateWithCallback } from '../utils/common.js'\n\nconst STATE_KEY = 'posts'\nconst TEMPLATE_NAME = 'posts'\nconst bindDataToNode = ({ attributes }, index, templateNode) => {\n  const clonedTemplateNode = templateNode.cloneNode(true) // 복제하지않으면 동기화됨 live node\n  attributes.tag.forEach((tag) => {\n    clonedTemplateNode.querySelector('.tag').innerHTML +=\n      `<label><mark>#${tag}</mark></label>`\n  })\n\n  clonedTemplateNode.querySelector('.post').dataset.index = index + 1\n  clonedTemplateNode.querySelector('.title').textContent = attributes.title\n  clonedTemplateNode.querySelector('.summary').textContent = attributes.summary\n  clonedTemplateNode.querySelector('.date').textContent = attributes.date.slice(\n    0,\n    10,\n  )\n  return clonedTemplateNode\n}\n\nexport default async (element, dispatch, redirect) => {\n  const posts = await dispatch(STATE_KEY)\n\n  return applyTemplateWithCallback(\n    element,\n    TEMPLATE_NAME,\n  )((parentNode, templateNode) => {\n    posts\n      .map((post, index) => bindDataToNode(post, index, templateNode))\n      .forEach((node) => parentNode.appendChild(node))\n    parentNode.onclick = (e) => {\n      const $post = e.target.closest('article.post')\n\n      if ($post) {\n        const id = $post.getAttribute('data-index')\n        redirect(`/posts/${id}`)\n      }\n    }\n\n    return parentNode\n  })\n}\n","export const NOT_FOUND_POST = {\n  attributes: {\n    title: '존재하지않는 포스트입니다.',\n  },\n  htmlBody: '',\n}\nexport const ROUTE_PARAMETER_REGEXP = /:(\\w+)/g\nexport const URL_FRAGMENT_REGEXP = '([^\\\\/]+)'\nexport const NAV_BTN_SELECTOR = 'a[data-navigation]'","import { renderDOM } from './utils/processRenderTasks.js'\r\nimport {\r\n  ROUTE_PARAMETER_REGEXP,\r\n  URL_FRAGMENT_REGEXP,\r\n} from './utils/constant.js'\r\n\r\nconst isHashFalsy = (hash) => {\r\n  const cleanedHash = hash.replace(/^#\\/?/, '')\r\n  return cleanedHash === 'undefined' || cleanedHash.trim() === ''\r\n}\r\n\r\nconst extractUrlParams = (route, windowHash) => {\r\n  const params = {}\r\n\r\n  if (route.params.length === 0) {\r\n    return params\r\n  }\r\n\r\n  const matches = windowHash.match(route.testRegExp)\r\n\r\n  matches.shift()\r\n\r\n  matches.forEach((paramValue, index) => {\r\n    const paramName = route.params[index]\r\n    params[paramName] = paramValue\r\n  })\r\n\r\n  return params\r\n}\r\n\r\nconst notFoundRouteHandler = (notFound) => {\r\n  if (isHashFalsy(window.location.hash)) {\r\n    window.location.hash = '#/posts'\r\n    return\r\n  }\r\n  notFound()\r\n}\r\n\r\nexport default () => {\r\n  const routes = []\r\n  let notFound = () => {}\r\n  let prevHash = null\r\n  const router = {}\r\n\r\n  const checkRoutes = (dispatch, redirect) => {\r\n    const { hash } = window.location\r\n    if (prevHash === hash) {\r\n      return\r\n    }\r\n\r\n    prevHash = hash\r\n\r\n    const root = document.getElementById('root')\r\n    const currentRoute = routes.find((route) => {\r\n      const { testRegExp } = route\r\n      return testRegExp.test(hash)\r\n    })\r\n\r\n    if (!currentRoute) {\r\n      notFoundRouteHandler(notFound)\r\n      return\r\n    }\r\n\r\n    const urlParams = extractUrlParams(currentRoute, window.location.hash)\r\n\r\n    currentRoute.component(root, urlParams)\r\n\r\n    renderDOM(root, dispatch, redirect)\r\n  }\r\n\r\n  // fragment에서 매개변수 이름 추출\r\n  router.addRoute = (fragment, component) => {\r\n    const params = []\r\n\r\n    const parsedFragment = fragment\r\n      .replace(ROUTE_PARAMETER_REGEXP, (match, paramName) => {\r\n        params.push(paramName)\r\n        return URL_FRAGMENT_REGEXP\r\n      })\r\n      .replace(/\\//g, '\\\\/')\r\n\r\n    routes.push({\r\n      testRegExp: new RegExp(`^${parsedFragment}$`),\r\n      component,\r\n      params,\r\n    })\r\n\r\n    return router\r\n  }\r\n\r\n  router.setNotFound = (callback) => {\r\n    notFound = callback\r\n    return router\r\n  }\r\n\r\n  router.navigate = (fragment) => {\r\n    window.location.hash = fragment\r\n  }\r\n\r\n  router.start = (dispatch, redirect) => {\r\n    window.addEventListener('hashchange', () => {\r\n      console.log('hash changed !')\r\n      checkRoutes(dispatch, redirect)\r\n    })\r\n\r\n    if (isHashFalsy(window.location.hash)) {\r\n      window.location.hash = '#/posts'\r\n    }\r\n\r\n    checkRoutes(dispatch, redirect)\r\n  }\r\n\r\n  return router\r\n}\r\n","const state = {\n  posts: [],\n  isPending: true,\n}\n\nconst fetchPosts = async () => {\n  if (!state.isPending) return\n  try {\n    const response = await fetch('./data/react.json')\n    if (!response.ok) throw new Error('Failed to fetch JSON file')\n\n    const { posts } = await response.json()\n    state.posts = posts\n    state.isPending = false\n  } catch (error) {\n    console.error('Error fetching JSON file:', error)\n  }\n}\n\nexport default async (key) => {\n  try {\n    await fetchPosts()\n    if (state[key] === undefined) throw new Error('Undefined key')\n    return state[key]\n  } catch (error) {\n    console.error('Error loading state:', error)\n    return null // 또는 적절한 에러 처리\n  }\n}\n","import { addComponent, removeComponent } from './utils/processRenderTasks.js'\nimport headerComponent from './components/header.js'\nimport notfoundComponent from './components/page404.js'\nimport postsComponent from './components/posts.js'\nimport createRouter from './router.js'\nimport detailComponent from './components/detail.js'\nimport model from './model/state.js'\nimport { NAV_BTN_SELECTOR } from './utils/constant.js'\nimport './css/index.css'\nimport './css/layout.css'\nimport './css/header.css'\nimport './css/post.css'\nimport './css/detail.css'\n\nconst dispatch = async (key) => await model(key)\n\nconst redirect = (path) => {\n  window.location.hash = path\n}\n\naddComponent('header', headerComponent)\n\nconst router = createRouter()\nrouter\n  .addRoute('#/posts', (root) => {\n    addComponent('posts', postsComponent)\n    removeComponent('detail', root)\n    removeComponent('404', root)\n  })\n  .addRoute('#/posts/:id', (root, { id }) => {\n    addComponent('detail', (...args) => detailComponent(id, ...args))\n    removeComponent('posts', root)\n    removeComponent('404', root)\n  })\n  .setNotFound(() => {\n    notfoundComponent()\n  })\n  .start(dispatch, redirect)\n\ndocument.body.addEventListener('click', (e) => {\n  const { target } = e\n  if (target.matches(NAV_BTN_SELECTOR)) {\n    const { navigate } = target.dataset\n    router.navigate(navigate)\n  }\n})\n","import { applyTemplateWithCallback } from \"../utils/common.js\"\n\nconst TEMPLATE_NAME = 'header'\nexport default (element) => applyTemplateWithCallback(element, TEMPLATE_NAME)()\n","import { applyTemplateWithCallback } from '../utils/common.js'\nimport { NOT_FOUND_POST } from '../utils/constant.js'\n\nconst STATE_KEY = 'posts'\nconst TEMPLATE_NAME = 'detail'\nconst bindDataToNode = ({ attributes, htmlBody }, templateNode) => {\n  const clonedTemplateNode = templateNode.cloneNode(true)\n  clonedTemplateNode.querySelector('.markdown-body').innerHTML = htmlBody\n  clonedTemplateNode.querySelector('.title').textContent = attributes.title\n  clonedTemplateNode.querySelector('.date').textContent =\n    attributes.date?.slice(0, 10)\n  return clonedTemplateNode\n}\n\nexport default async (paramId, element, dispatch) => {\n  const posts = await dispatch(STATE_KEY)\n  const extractedPost = posts[Number(paramId) - 1]\n  const { attributes, htmlBody } = extractedPost || NOT_FOUND_POST\n  return applyTemplateWithCallback(\n    element,\n    TEMPLATE_NAME,\n  )((parentNode, templateNode) => {\n    const bindedTemplateNode = bindDataToNode({ attributes, htmlBody }, templateNode)\n    parentNode.appendChild(bindedTemplateNode)\n    return parentNode\n  })\n}\n"],"names":["isNodeChanged","node1","node2","onclick","isChangedAttributeLength","n1Attributes","attributes","n2Attributes","length","compareAttributeLength","isChangedAttribute","Array","from","find","name","getAttribute","compareAttribute","isChangedValue","value","checked","compareValue","isChangedTextcontent","children","textContent","compareTextcontent","applyDiff","parentNode","realNode","virtualNode","replaceWith","appendChild","remove","evaluateNodeDifferences","realNodeChildren","virtualNodeChildren","max","Math","i","vdom","addComponent","component","removeComponent","root","undefined","querySelector","innerHTML","render","async","element","dispatch","redirect","Promise","resolve","window","requestAnimationFrame","cloneComponent","cloneNode","childComponents","querySelectorAll","childNode","childName","dataset","newChildNode","applyTemplateWithCallback","clonedTemplateChildNode","document","getElementById","content","firstElementChild","clonedParentNode","formatCallback","TEMPLATE_NAME","postsComponent","posts","templateNode","map","post","index","clonedTemplateNode","tag","forEach","title","summary","date","slice","bindDataToNode","node","e","$post","target","closest","id","NOT_FOUND_POST","htmlBody","ROUTE_PARAMETER_REGEXP","isHashFalsy","hash","cleanedHash","replace","trim","state","isPending","model","key","response","fetch","ok","Error","json","error","console","fetchPosts","router","routes","notFound","prevHash","checkRoutes","location","currentRoute","route","testRegExp","test","notFoundRouteHandler","urlParams","windowHash","params","matches","match","shift","paramValue","paramName","extractUrlParams","rootElement","newRootElement","optimizeRenderingCycle","renderDOM","addRoute","fragment","parsedFragment","push","RegExp","setNotFound","callback","navigate","start","addEventListener","log","createRouter","args","paramId","extractedPost","Number","bindedTemplateNode","detailComponent","_","initLayout","notfoundComponent","path","body"],"mappings":"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"}