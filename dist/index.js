!function(){"use strict";const t={},e=(e,o)=>{t[e]=o},o=(e,o)=>{t[e]=void 0,o.querySelector(`[data-component="${e}"]`).innerHTML=""},n=async(e,o,a,s)=>{console.log(t);const r=s?await t[s](e,o,a):e.cloneNode(!0);return[...r.querySelectorAll("[data-component]")].forEach((async e=>{const{component:s}=e.dataset;if(void 0!==t[s]){const t=await n(e,o,a,s);e.replaceWith(t)}})),r};const a=({attributes:t},e)=>{const o=document.getElementById("template-post").content.firstElementChild.cloneNode(!0);return o.querySelector(".post").dataset.index=e+1,o.querySelector(".title").textContent=t.title,o.querySelector(".summary").textContent=t.summary,o.querySelector(".date").textContent=t.date.slice(0,10),o};var s=async(t,e,o)=>{const n=await e("posts"),s=t.cloneNode(!0);return n.map(((t,e)=>a(t,e))).forEach((t=>s.appendChild(t))),s.addEventListener("click",(t=>{const e=t.target.closest("article.post");if(e){const t=e.getAttribute("data-index");o(`/posts/${t}`)}})),s};const r=/:(\w+)/g;var c=async(t,e,o)=>{const n=await o("posts"),{attributes:a,htmlBody:s}=n[Number(t)-1],r=document.getElementById("template-detail").content.firstElementChild.cloneNode(!0);r.querySelector(".markdown-body").innerHTML=s,r.querySelector(".title").textContent=a.title,r.querySelector(".date").textContent=a.date.slice(0,10);const c=e.cloneNode(!0);return c.appendChild(r),c};const i={posts:[],isPending:!0};var d=async t=>{try{if(await(async()=>{try{if(!i.isPending)return;const t=await fetch("./data/react.json");if(!t.ok)throw new Error("Failed to fetch JSON file");const{posts:e}=await t.json();i.posts=e,i.isPending=!1}catch(t){console.error("Error fetching JSON file:",t)}})(),void 0===i[t])throw new Error("undefined key");return i[t]}catch(t){console.error("Error load state:",t)}};e("app",(t=>{const e=t.cloneNode(!0);return e.innerHTML="",e.appendChild(document.getElementById("template-header").content.firstElementChild.cloneNode(!0)),e}));const l=(()=>{const t=[];let e=()=>{};const o={},a=(o,a)=>{const{hash:s}=window.location,r=t.find((t=>{const{testRegExp:e}=t;return e.test(s)}));if(!r)return void e();const c=((t,e)=>{const o={};if(0===t.params.length)return o;const n=e.match(t.testRegExp);return n.shift(),n.forEach(((e,n)=>{const a=t.params[n];o[a]=e})),o})(r,window.location.hash),i=document.getElementById("root");r.component(i,c),((t,e,o)=>{window.requestAnimationFrame((async()=>{console.log("원본 rootElement >>>> ",t);const a=await n(t,e,o);console.log("교체 newRootElement >>>>>>>>>>>>>>>  ",a),t.replaceWith(a)}))})(i,o,a)};return o.addRoute=(e,n)=>{const a=[],s=e.replace(r,((t,e)=>(a.push(e),"([^\\/]+)"))).replace(/\//g,"\\/");return t.push({testRegExp:new RegExp(`^${s}$`),component:n,params:a}),o},o.setNotFound=t=>(e=t,o),o.navigate=t=>{window.location.hash=t},o.start=(t,e)=>{window.addEventListener("hashchange",(()=>{console.log("hash changed !"),a(t,e)})),window.location.hash||(window.location.hash="#/posts"),a(t,e)},o})();l.addRoute("#/posts",(t=>{e("posts",s),o("detail",t)})).addRoute("#/posts/:id",((t,{id:n})=>{e("detail",((...t)=>c(n,...t))),o("posts",t)})).setNotFound((()=>document.getElementById("root").innerHTML="Not found")).start((async t=>await d(t)),(t=>{window.location.hash=t}));document.body.addEventListener("click",(t=>{const{target:e}=t;if(e.matches("a[data-navigation]")){const{navigate:t}=e.dataset;l.navigate(t)}}))}();
//# sourceMappingURL=index.js.map
