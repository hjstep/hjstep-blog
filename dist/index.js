!function(){"use strict";const t=(t,e)=>{t.onclick!==e.onclick&&(e.onclick=t.onclick);const n=((t,e)=>{const n=t.attributes,o=e.attributes;return n.length!==o.length})(t,e);if(n)return!0;const o=((t,e)=>{const n=t.attributes;return Array.from(n).find((({name:n})=>t.getAttribute(n)!==e.getAttribute(n)))})(t,e);if(o)return!0;const r=((t,e)=>t.value!==e.value||t.checked!==e.checked)(t,e);if(r)return!0;const a=((t,e)=>0===t.children.length&&0===e.children.length&&t.textContent!==e.textContent)(t,e);return!!a},e=(n,o,r)=>{((e,n,o)=>{e&&(!n||o?n||!o?t(o,n)&&n.replaceWith(o):e.appendChild(o):n.remove())})(n,o,r);const a=o?Array.from(o.children):[],c=r?Array.from(r.children):[],s=Math.max(a.length,c.length);for(let t=0;t<s;t++)e(o,a[t],c[t])},n={},o=(t,e)=>{n[t]=e},r=(t,e)=>{n[t]=void 0,e.querySelector(`[data-component="${t}"]`)&&(e.querySelector(`[data-component="${t}"]`).innerHTML="")};const a=async(t,e,o,r)=>{await new Promise((t=>{window.requestAnimationFrame(t)}));const c=r?await n[r](t,e,o):t.cloneNode(!0),s=c.querySelectorAll("[data-component]");for(const t of s){const{component:r}=t.dataset;if(void 0!==n[r]){const n=await a(t,e,o,r);t.replaceWith(n)}}return c},c=(t,e)=>{const n=document.getElementById("template-"+e).content.firstElementChild.cloneNode(!0),o=t.cloneNode(!0);return o.innerHTML="",t=>"function"==typeof t?t(o,n):(o.appendChild(n),o)};const s="404";var i=async(t,e,n)=>{const o=await e("posts");return c(t,"posts")(((t,e)=>(o.map(((t,n)=>(({attributes:t},e,n)=>{const o=n.cloneNode(!0);return t.tag.forEach((t=>{o.querySelector(".tag").innerHTML+=`<label><mark>#${t}</mark></label>`})),o.querySelector(".post").dataset.index=e+1,o.querySelector(".title").textContent=t.title,o.querySelector(".summary").textContent=t.summary,o})(t,n,e))).forEach((e=>t.appendChild(e))),t.onclick=t=>{const e=t.target.closest("article.post");if(e){const t=e.getAttribute("data-index");n(`/posts/${t}`)}},t)))};const d={attributes:{title:"존재하지않는 포스트입니다."},htmlBody:""},l=/:(\w+)/g,u=t=>{const e=t.replace(/^#\/?/,"");return"undefined"===e||""===e.trim()};const h={posts:[],isPending:!0};var p=async t=>{try{if(await(async()=>{if(h.isPending)try{const t=await fetch("./data/react.json");if(!t.ok)throw new Error("Failed to fetch JSON file");const{posts:e}=await t.json();h.posts=e,h.isPending=!1}catch(t){console.error("Error fetching JSON file:",t)}})(),void 0===h[t])throw new Error("Undefined key");return h[t]}catch(t){return console.error("Error loading state:",t),null}};o("header",(t=>c(t,"header")()));const m=(()=>{const t=[];let n=()=>{},o=null;const r={},c=(r,c)=>{const{hash:s}=window.location;if(o===s)return;o=s;const i=document.getElementById("root"),d=t.find((t=>{const{testRegExp:e}=t;return e.test(s)}));if(!d)return void(t=>{u(window.location.hash)?window.location.hash="#/posts":t()})(n);const l=((t,e)=>{const n={};if(0===t.params.length)return n;const o=e.match(t.testRegExp);return o.shift(),o.forEach(((e,o)=>{const r=t.params[o];n[r]=e})),n})(d,window.location.hash);d.component(i,l),(async(t,n,o)=>{const r=await a(t,n,o);e(document.getElementById("root"),t,r)})(i,r,c)};return r.addRoute=(e,n)=>{const o=[],a=e.replace(l,((t,e)=>(o.push(e),"([^\\/]+)"))).replace(/\//g,"\\/");return t.push({testRegExp:new RegExp(`^${a}$`),component:n,params:o}),r},r.setNotFound=t=>(n=t,r),r.navigate=t=>{window.location.hash=t},r.start=(t,e)=>{window.addEventListener("hashchange",(()=>{console.log("hash changed !"),c(t,e)})),u(window.location.hash)&&(window.location.hash="#/posts"),c(t,e)},r})();m.addRoute("#/posts",(t=>{o("posts",i),r("detail",t),r("404",t)})).addRoute("#/posts/:id",((t,{id:e})=>{o("detail",((...t)=>(async(t,e,n)=>{const o=(await n("posts"))[Number(t)-1],{attributes:r,htmlBody:a}=o||d;return c(e,"detail")(((t,e)=>{const n=(({attributes:t,htmlBody:e},n)=>{const o=n.cloneNode(!0);return o.querySelector(".markdown-body").innerHTML=e,o.querySelector(".title").textContent=t.title,o.querySelector(".detail-image").src=t.imgSrc,o})({attributes:r,htmlBody:a},e);return t.appendChild(n),t}))})(e,...t))),r("posts",t),r("404",t)})).setNotFound((()=>{(()=>{const t=document.getElementById("root");c(t,s)(((e,n)=>{const o=t.querySelector(`[data-component="${s}"]`).cloneNode(!0);(t=>{t.querySelector('[data-component="header"]').innerHTML="",t.querySelector('[data-component="detail"]').innerHTML="",t.querySelector('[data-component="posts"]').innerHTML=""})(t),o.innerHTML="",o.appendChild(n),t.querySelector(`[data-component="${s}"]`).replaceWith(o)}))})()})).start((async t=>await p(t)),(t=>{window.location.hash=t})),document.body.addEventListener("click",(t=>{const{target:e}=t;if(e.matches("a[data-navigation]")){const{navigate:t}=e.dataset;m.navigate(t)}}))}();
